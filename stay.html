<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stay</title>

    <script
    src="https://kit.fontawesome.com/24c494a6b6.js"
    crossorigin="anonymous"
  ></script>
    <link rel="stylesheet" href="stay.css">
    <link rel="stylesheet" href="./styles/header.css">
    <link rel="stylesheet" href="./styles/footer.css">
  
</head>
<body> 
    <div id="header">
        <nav>
            <img src="https://www.expedia.co.in/_dms/header/logo.svg?locale=en_GB&siteid=27&2&6f9ec7db" alt="Expedia logo" width="126px" height="28px">
            <button class="shopBtn"><h4>Shop travel</h4><i class="fa-solid fa-chevron-down"></i></button>
            <button class="appBtn"><i class="fa fa-download"></i><p>Get the app</p></button>
            <button class="engBtn"><i class='fas fa-globe'></i><h4>English</h4></button>
            <a href="#" class="property"><h4>List your property</h4></a>
            <a href="#" class="support"><h4>Support</h4></a>
            <a href="#" class="trip"><h4>Trips</h4></a>
            <a href="#" class="mess"><i class='fas fa-comment-alt' style='font-size:24px'></i></a>
            <button class="signIn"><h4>Sign in</h4></button>
            <button class="toggle">☰</button>
        </nav>
       
    <div id="products_container">
        <div id="outermost_left">
            <div id="outer_up">
                <div id="location_input_div">
                </div>
            </div>

           <div id="homepagebox1_b">

            <div id="stay_traveller_rooms">
            
            <div> <input class="input_icon"type="text" id="inputbox1" placeholder="Going to">
            <div id="location_suggestion_div"></div>

              <input class="checkin_icon" type="date" id="inputbox2" required>
              <input class="checkout_icon" type="date" id="inputbox3" required>
            </div>
            <div id="travellers_div">
            <div id="trveller_icon"> <i class="fa-solid fa-user"></i></div>
                  <div id="traveller_inside">1 Room, </div>
                  <div id="no_of_travellers"></div>
              </div>

              <div><button id="inputboxbutton">Search</button> </div>
            </div>
                        
            <div id="travellers_display" style="display:none">
            <h5 id="">Travellers</h5>
            <p>Room 1 </p>
            
            
            <div id="counter_travellers">
                <div>Adults</div>
                <div id="counter">
                    <div id="add_travellers">+</div>
                    <div id="display_count">1</div>
                    <div id="remove_travellers">-</div>
                </div>
            </div>
            
            <button id="count_doneButton">Done</button>
            </div>

            </div>

            
            <div id="outer_down">
                <div id="outer_down_left_big">
                    <div id="products_map">

                        <div class="gmap_canvas">
                            <iframe 
                               
                                id="gmap_canvas" 
                                frameborder="0" 
                                scrolling="no" 
                                marginheight="0" 
                                marginwidth="0">
                            </iframe>                        
                        </div>
                    </div>
                    <hr>
                    <div id="products_searchByProperty">
                        <h3>Search by property name</h3>
                        <input type="text" id="searching" placeholder="e.g. Best Western">
                    </div>
                    <hr>
                    <div id="products_filter_div">
                        <h3>Filter By</h3>
                        <h5>Star Ratings</h5>
 
                        <h5>Star Ratings</h5>
                        <label for="starRating1"><input type="radio" id="starRating1" name="star" value="1"> 1 Star</label><br><br>
                        <label for="starRating2"><input type="radio" id="starRating2" name="star" value="2"> 2 Star</label><br><br>
                        <label for="starRating3"><input type="radio" id="starRating3" name="star" value="3"> 3 Star</label><br><br>
                        <label for="starRating4"><input type="radio" id="starRating4" name="star" value="4"> 4 Star</label><br><br>
                        <label for="starRating5"><input type="radio" id="starRating5" name="star" value="5"> 5 Star</label><br><br>
                        >
                      
                    </div>
                </div>
                <div id="outer_down_right_big">
                    <div id="totalProp_and_sort_div">
                        <div id="noOfPropertiesDiv"></div>
                        <div id="sortProductsDiv">
                            <lable for="sortID">Sort By</lable>
                            <select name="sort" id="sortID">
                                <option value="">Recommended</option>
                                <option  value="PRICE">Price (Low to High)</option>
                                <option selected value="PRICE_HIGHEST_FIRST">Price (High to Low)</option>
                                <option value="STAR_RATING_HIGHEST_FIRST">Ratings</option>
                            </select>
                        </div>
                    </div>
                    <div class="hotel-container">
           
           
                    </div>
                </div>
            </div>
        </div>

        <div id="outermost_right">
            <img src="https://tpc.googlesyndication.com/simgad/17447823249981941085?" alt="photo">
            <img src="https://tpc.googlesyndication.com/simgad/611061976946598058?" alt="photo">
        </div>
    </div>
    <footer>
        <div class="footer-container">
            <div class="column">
                <h4>Company</h4>
                <a href="#">About us</a>
                <a href="#">Jobs</a>
                <a href="#">List your property</a>
                <a href="#">Partnership</a>
                <a href="#">Newsroom</a>
            </div>
            <div class="column">
                <h4>Explore</h4>
                <a href="#">India travel guide</a>
                <a href="#">Hotels in India</a>
                <a href="#">Holiday rentals in India</a>
                <a href="#">Holiday packages in India</a>
                <a href="#">Domestic flights</a>
                <a href="#">Car hire in India</a>
                <a href="#">All accommodation types</a>
                <a href="#">Travel blog</a>
            </div>
            <div class="column">
                <h4>Policies</h4>
                <a href="#">Privacy</a>
                <a href="#">Cookies</a>
                <a href="#">Terms of use</a>
                <a href="#">Vrbo terms and conditions</a>
                <a href="#">Content guidelines and reporting content</a>
            </div>
            <div class="column">
                <h4>Help</h4>
                <a href="#">Support</a>
                <a href="#">Change or cancel your booking</a>
                <a href="#">Refund process and timelines</a>
                <a href="#">Book a flight using an airline credit</a>
                <a href="#">International travel documents</a>
            </div>
        </div>
        <div class="underline"></div>
        <div class="copyright">
            <img src="https://images.trvl-media.com/media/content/expind/images/sg/secure.png" alt="">
            <p>© 2025 Expedia, Inc., an Expedia Group company. All rights reserved. Expedia and the Expedia Logo are trademarks or registered trademarks of Expedia, Inc.</p>
        </div>
    </footer>
</body>
</html>
<script src="./scripts/stay.js" type="module">
    
</script>

<script>
            
            let hotels = []; 

// Fetch hotels from API
function fetchHotels() {
    fetch("https://expediaclone-default-rtdb.firebaseio.com/hotels/hotels.json")
        .then(response => response.json())
        .then(data => {
            if (!data) {
                console.error("No data found");
                return;
            }

            // Update the global hotels array
            hotels = Object.values(data).filter(hotel => hotel && hotel.image && hotel.image.length > 0);
            
            if (hotels.length === 0) {
                console.warn("No valid hotel data available.");
                return;
            }

            displayHotels(hotels);
        })
        .catch(error => console.error("Error fetching data:", error));
}

// Display hotels function
function displayHotels(hotels) {
    const container = document.querySelector(".hotel-container");
    container.innerHTML = ""; 

    hotels.forEach(hotel => {
        const hotelCard = document.createElement("div");
        hotelCard.classList.add("hotel-card");

        let currentImageIndex = 0;

        hotelCard.innerHTML = `
            <div class="slider">
                <button class="left"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M15 18l-6-6 6-6" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg> </button>
                <div class="image-container">
                    <img src="${hotel.image[currentImageIndex]}" alt="${hotel.name}"/>
                </div>
                <button class="right"><svg width="24" height="24" font-weight="bold" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9 18l6-6-6-6" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg></button>
            </div>
            <div class="hotel-info">
                <h3>${hotel.name || "Unknown Hotel"}</h3>
                <p>${hotel.place || "Unknown Location"}</p>
                <p>Rent: ₹${hotel.rent_price || "N/A"}</p>
                <p>Discount: ${hotel.discount || "No Discount"}</p>
                <p class="ptag"><strong>Rating:</strong> ⭐ ${hotel.rating || "Not Rated"}</p>
            </div>
        `;

        const imgElement = hotelCard.querySelector(".image-container img");
        const leftBtn = hotelCard.querySelector(".left");
        const rightBtn = hotelCard.querySelector(".right");

        leftBtn.addEventListener("click", () => {
            currentImageIndex = (currentImageIndex - 1 + hotel.image.length) % hotel.image.length;
            imgElement.src = hotel.image[currentImageIndex];
        });

        rightBtn.addEventListener("click", () => {
            currentImageIndex = (currentImageIndex + 1) % hotel.image.length;
            imgElement.src = hotel.image[currentImageIndex];
        });

        container.appendChild(hotelCard);
    });
}

// Search hotels by name
document.getElementById("searching").addEventListener("input", searchHotels);
function searchHotels() {
    const searchInput = document.getElementById("searching").value.toLowerCase();

    if (searchInput.trim() === "") {
        displayHotels(hotels);
        return;
    }

   
    const filteredHotels = hotels.filter(hotel => hotel.name.toLowerCase().includes(searchInput) || hotel.place.toLowerCase().includes(searchInput));

    displayHotels(filteredHotels);
}




document.getElementById("sortID").addEventListener("change",sorting);

function sorting(){
    const sortValue=document.getElementById("sortID").value
    if(sortValue==="PRICE_HIGHEST_FIRST"){
       
       hotels.sort((a,b)=>b.rent_price-a.rent_price)
    }
    else if(sortValue==="PRICE"){
        hotels.sort((a,b)=>a.rent_price-b.rent_price)
    }
    else if(sortValue==="STAR_RATING_HIGHEST_FIRST"){
        hotels.sort((a,b)=>b.rating-a.rating)
    }
    displayHotels(hotels);
}

document.getElementById("products_filter_div").addEventListener("change",filtering)

function filtering(){

}


document.querySelectorAll('input[name="star"]').forEach(radio => {
    radio.addEventListener("change", filterHotels);
});

function filterHotels() {
    const selectedRating = document.querySelector('input[name="star"]:checked')?.value;

    if (!selectedRating) {
        displayHotels(hotels);
        return;
    }

    const minRating = parseInt(selectedRating);  
    const maxRating = minRating + 0.9; 

    const filteredHotels = hotels.filter(hotel => hotel.rating >= minRating && hotel.rating <= maxRating);
    displayHotels(filteredHotels);
}


fetchHotels();

</script>